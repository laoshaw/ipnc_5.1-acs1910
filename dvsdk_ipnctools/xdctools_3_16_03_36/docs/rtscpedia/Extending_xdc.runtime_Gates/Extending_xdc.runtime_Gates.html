<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Extending xdc.runtime Gates - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Extending xdc.runtime Gates&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Extending xdc.runtime Gates" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Extending_This_Package_Index" title="Overview_of_xdc.runtime#Extending_This_Package_Index"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Extending_xdc.runtime_Gates__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><p id="title">Extending xdc.runtime Gates</p><p id="subtitle">How to provide mutual exclusion gates</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Architecture"><span class="tocnumber">2.1</span> <span class="toctext">Architecture</span></a></li>
<li class="toclevel-2"><a href="#Configuration"><span class="tocnumber">2.2</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction"></a><h2> <span class="mw-headline">Introduction</span></h2>
<p>The <tt>xdc.runtime</tt> package manages a few global data structures that must be protected in multi-threaded environments.  Since the <tt>xdc.runtime</tt> package requires a mechanism to protect concurrent access to data and this is a common requirement for multi-threaded applications, the <tt>xdc.runtime</tt> package 
</p>
<ul><li>provides a module, <tt><a href="../../cdoc/xdc/runtime/Gate.html" class="cdoc"><tt>Gate</tt></a></tt>, that enables applications to easily serialize access to shared data structures, and
</li><li>defines an interface, <tt><a href="../../cdoc/xdc/runtime/IGateProvider.html" class="cdoc"><tt>IGateProvider</tt></a></tt>, that enables you to "extend" or port the <tt>xdc.runtime</tt> package to support any multi-threaded environment.
</li></ul>
<p>In the sections below, we show how to port the <tt>xdc.runtime</tt> package to virtually any multi-threaded environment.  This not only enables use of the <tt>xdc.runtime</tt> modules in a multi-threaded environment, but also enables the use of "thread-aware" modules that rely exclusively on the <tt>xdc.runtime</tt> services for synchronization services to also be used in such an environment.
</p>
<a name="Overview"></a><h2> <span class="mw-headline">Overview</span></h2>
<p>Concurrency support is provided by the <tt>xdc.runtime</tt> package via "gates", simple mutexes that can be recursively acquired by the same thread.
</p><p>With the exception of "lock free" data structures, mutexes are necessary to protect shared data structures.  But not every application allows multiple threads to call every function in a system and, as a result, some applications don't require protection for all modules that manage sharable data; just because data managed by a module is sharable does not mean that it's shared in every application.  Of course a module producer can't know whether their module(s) will be concurrently accessed, so they must implement their module assuming that it will be.  The consequence is that single threaded applications, and even well structured multi-threaded applications, incur unnecessary overhead of locking and unlocking mutexes around data that are never accessed concurrently.  This performance verses multi-threading support tradeoff can be resolved <i>if</i> the overhead of the mutex can be made very low.
</p><p>Short duration locks can often be implemented efficiently using platform-specific services; e.g., locks on uni-processors systems are very efficiently implemented by disabling all interrupts on entry and restoring interrupt state after the operation is complete.  Some processors, such as TI's C6000 CPUs can disable and restore interrupts around short sections with just 1 cycle of overhead.  Because of the low overhead of these mechanisms, the unnecessary overhead incurred by some applications can be largely ignored.  However, it's important to keep in mind that execution time overhead is not the only performance metric for real-time systems.  Response time latencies are also critically important and a module that disables interrupts for even a micro-second may be unacceptable.
</p><p>Depending on the operation required on shared data, it may be necessary to allow a thread to be preempted while it holds one or more locks.  But locks with this property generally require much greater overhead and are operating system specific.  So we're back to the problem of imposing unnecessary overhead on some users <i>and</i> the module producer must reimplement the module for every operating system used by her customers.
</p><p>RTSC enables module providers to write their modules in such a way that they 
</p>
<ul><li> are 100% operating system independent,
</li><li> enable integrators to eliminate unnecessary execution time overhead, and
</li><li> can be delivered as binary libraries; i.e., they don't require re-compilation by the end user.
</li></ul>
<p>In short, module providers can write their code once for all application environments and system integrators can eliminate unnecessary synchronization overhead on a per module basis.
</p>
<a name="Architecture"></a><h3> <span class="mw-headline">Architecture</span></h3>
<p>RTSC modules that manage data that may be concurrently accessed must be designed with synchronization overhead and scheduling latency considerations in mind.  The <tt>System</tt> gate is used to protect very short duration operations (via <tt>Gate_enterSystem()</tt> and <tt>Gate_leaveSystem()</tt>).  If a module requires a longer duration gate, it declares that it is "gated" via the <a href="../XDCspec_-_%40Gated/XDCspec_-_%40Gated.html" title="XDCspec - @Gated">@Gated attribute</a> in the module's specification.  In so doing, the system integrator has the opportunity to assign an appropriate gate to the module.  If a gated module will be concurrently accessed you <i>must</i> assign an appropriate <tt>IGateProvider</tt> instance to the module.  If, on the other hand, you <i>know</i> that a gated module is never accessed concurrently, you can assign an instance of the <tt>GateNull</tt> module to the module's <tt>.common$gate</tt> configuration parameter and avoid the time and space overhead associated with a non-trivial gate.
</p><p>The <tt>xdc.runtime.System</tt> module is gated and the <tt>xdc.runtime.Gate</tt> module allows other modules to use the "<tt>System</tt> gate"; i.e., the gate associated with the system module.
</p>
<a name="Configuration"></a><h3> <span class="mw-headline">Configuration</span></h3>
<p>If the <tt>xdc.runtime</tt> package is used in a multi-threaded environment you must configure the <tt>xdc.runtime.System</tt> module's gate with a gate that only allows one thread at a time to operate inside the gate.  Some Real-Time Operating Systems (RTOS), such as DSP/BIOS, automatically configure the <tt>System</tt> module's gate to allow any thread (even ISRs) to use the <tt>xdc.runtime</tt>.  If you are not using such an RTOS, you'll have to find (or create) a module that implements the <tt>IGateProvider</tt> interface, and use this module to create an appropriate gate for the <tt>System</tt> module.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Lock = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;examples.runtime.gates.Lock&quot;</span><span class="br0">&#41;</span>;
System.common$.gate = Lock.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<a name="Examples"></a><h2> <span class="mw-headline">Examples</span></h2>
<p>In the table below, we list examples that illustrate the key requirements of gate providers.
</p>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tr>
<th align="center"> <b>Example</b>
</th><th align="center"> <b>Description</b>
</th><th align="center"> <b>Purpose</b>
</th></tr>
<tr>
<td align="left"> <a href="Extending_xdc.runtime_Gates__Example_1.html" title="Extending xdc.runtime Gates/Example 1">Example 1</a>
</td><td align="left"> Simple pthread-based <tt>IGateProvider</tt> module
</td><td align="left"> illustrate a module that allows <tt>xdc.runtime</tt> to be used in pthread-based applications
</td></tr></table>
<a name="See_also"></a><h2> <span class="mw-headline">See also</span></h2>
<p></p>
<table id="TOC" class="DocList">

<tr>
<td class="DocListTitle1" style="width:35%;"><a href="../Using_xdc.runtime_Gates/Using_xdc.runtime_Gates.html" title="Using xdc.runtime Gates">Using xdc.runtime Gates</a>
</td><td class="DocListSubTitle1">How to serialize access to shared data structures
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="../XDCspec_-_%40Gated/XDCspec_-_%40Gated.html" title="XDCspec - @Gated">XDCspec - @Gated</a>
</td><td class="DocListSubTitle">This module has a gate
</td></tr></table>
<p></p>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Extending xdc.runtime Gates&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Extending xdc.runtime Gates" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Extending_This_Package_Index" title="Overview_of_xdc.runtime#Extending_This_Package_Index"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Extending_xdc.runtime_Gates__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Extending_xdc.runtime_Gates.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.207 secs. --></body></html>
