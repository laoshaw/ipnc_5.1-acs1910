<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Using xdc.runtime Logging/Example 2 - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Logging/Example 2&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="Using_xdc.runtime_Logging__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_left.png" /></a>&nbsp;<a href="Using_xdc.runtime_Logging.html#TOC" title="Using xdc.runtime Logging"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Using_xdc.runtime_Logging__Example_3.html" title="Example 3"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><p id="title">Using xdc.runtime Logging/Example 2</p><p id="subtitle">Events provided by all RTSC target modules</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Implicit_Events_from_RTSC_Modules"><span class="tocnumber">1</span> <span class="toctext">Implicit Events from RTSC Modules</span></a></li>
<li class="toclevel-1"><a href="#Method_Invocation_Events"><span class="tocnumber">2</span> <span class="toctext">Method Invocation Events</span></a></li>
<li class="toclevel-1"><a href="#Instance_Life-cycle_Events"><span class="tocnumber">3</span> <span class="toctext">Instance Life-cycle Events</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Implicit_Events_from_RTSC_Modules"></a><h2> <span class="mw-headline">Implicit Events from RTSC Modules</span></h2>
<p>By default, all RTSC <a href="../Glossary/Glossary.html#Target_Module" title="Glossary">target modules</a> support <a href="../../cdoc/xdc/runtime/Diags.html#.E.N.T.R.Y" class="cdoc"><tt>entry</tt></a> and <a href="../../cdoc/index.html#xdc/runtime/Diags.html#.E.X.I.T" class="cdoc"><tt>exit</tt></a> events for every method.  In other words, whenever any method of module's function is entered (called) a <tt>Log</tt> event containing the parameters passed to the function is triggered and when the function exits (returns) a <tt>Log</tt> event containing the function return value is triggered.  In addition, for those modules that support instances, instance <a href="../../cdoc/index.html#xdc/runtime/Diags.html#.L.I.F.E.C.Y.C.L.E" class="cdoc"><tt>life-cycle</tt></a> trace is also available; whenever an instance is created or deleted, an appropriate <tt>Log</tt> event is triggered.  All of these events are called <i>implicit</i> because the module's author did not have to add any code to their sources to trigger these events.
</p><p>Applications that use RTSC target modules (e.g., any of the DSP/BIOS 6.x modules) can be configured to enable the generation and display of these events in much the same way as shown in <a href="Using_xdc.runtime_Logging__Example_1.html" title="Using xdc.runtime Logging/Example 1">Example 1</a>.  To illustrate how to use implicit events, we suppose there is a RTSC module named <tt>examples.runtime.Mod</tt> whose specification includes the following statements.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Mod.xdc</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">module</span> Mod <span class="br0">&#123;</span>
    <span class="kw2">Bool</span> foo<span class="br0">&#40;</span><span class="kw2">Int</span> x, <span class="kw2">String</span> s<span class="br0">&#41;</span>; <span class="xdoc">/*! A module function */</span>
&nbsp;
  <span class="kw1">instance</span>:
    <span class="kw2">Int</span> bar<span class="br0">&#40;</span><span class="br0">&#41;</span>;                 <span class="xdoc">/*! An instance function */</span>
<span class="br0">&#125;</span>
&nbsp;</pre></td></tr></table>
<p>In this example we show a series of configuration files, each building on the previous, with differences indicated by a <a class="codexLink" href="#cl-hello_config:!"><span class="codexLink">!</span></a> symbol at the beginning of each line that changed or a <a class="codexLink" href="#cl-hello_config:+"><span class="codexLink">+</span></a> in front of each line added.  The first configuration file differs only slightly from the one in <a href="Using_xdc.runtime_Logging__Example_1.html" title="Using xdc.runtime Logging/Example 1">Example 1</a>: 
</p>
<ul><li> we add an <tt><a href="../The_XDCscript_Language/The_XDCscript_Language.html#XdcUseModule" title="The XDCscript Language">xdc.useModule()</a></tt> statement for the module <tt>examples.runtime.Mod</tt> that's used in the example applications, and
</li><li> rather than configuring the <tt>Main</tt> module (which only applies to non-RTSC modules), we configure the special <tt>Defaults</tt> module which specifies default settings for <i>all</i> modules (including <tt>Main</tt>).
</li></ul>
<p><span id="hello_config"></span><div id="cl-1:+"></div><div id="cl-hello_config:+"></div><div id="cl-1:!"></div><div id="cl-hello_config:!"></div><div id="cl-1:!"></div><div id="cl-hello_config:!"></div><div id="cl-1:!"></div><div id="cl-hello_config:!"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>hello.cfg</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab"><span class="codexLab">+</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">!</span><br /><span class="codexLab">!</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">!</span><br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Mod = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;examples.runtime.Mod&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Log= <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Log&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Diags = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Diags&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* enable runtime entry events for all code (by default) */</span>
<span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
Defaults.common$.diags_ENTRY = Diags.RUNTIME_ON;
&nbsp;
<span class="coMULTI">/* use the LoggerSys ILogger service provider */</span>
<span class="kw1">var</span> Logger = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.LoggerSys&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* create and bind a default logger for all code */</span>
Defaults.common$.logger = Logger.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<p>This new configuration has the advantage that it allows us to easily control <i>all</i> RTSC modules in the application with a single setting rather than having to individually control each module.
</p>
<p><div class="Notice"><p class="Notice">Although it is convenient - especially during development - to enable logging for <i>all</i> modules as shown above, for applications with many modules it is prudent to explicitly configure the modules you expect to trace in the deployed application.  See the <a href="Using_xdc.runtime_Logging.html#Performance_Considerations" title="Using xdc.runtime Logging">Performance Considerations</a> section for more information.</p></div></p>
<p>Before showing the <tt>Log</tt> events implicitly generated by RTSC modules, it is interesting to see the effect of this new configuration file on the "hello world" application shown in <a href="Using_xdc.runtime_Logging__Example_1.html" title="Using xdc.runtime Logging/Example 1">Example 1</a>.
</p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>hello.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Log.h&gt;</span>
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Diags.h&gt;</span>
&nbsp;
<span class="kw2">int</span> main<span class="br0">&#40;</span><span class="kw2">int</span> argc, <span class="kw2">String</span> argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    Log_print0<span class="br0">&#40;</span>Diags_ENTRY, <span class="st0">&quot;hello world&quot;</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="kw1">return</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br /></tt></td><td class="codexBody"><pre>xdc.runtime.Main: hello world</pre></td></tr></table>
</td></tr></table>
<p>Notice that the output of <tt>hello.c</tt> is <i>unchanged</i> by this new configuration.  Why? The <tt>Defaults</tt> module's configuration parameters apply to <i>all</i> modules (including <tt>Main</tt>) that have not been explicitly set.  By setting a logger in the <tt>Defaults</tt> module and <i>not</i> setting one in <tt>Main</tt>, this configuration script has the same effect as <tt>hello.c</tt>'s original configuration script.
</p>
<a name="Method_Invocation_Events"></a><h2> <span class="mw-headline">Method Invocation Events</span></h2>
<p>Unless explicitly disabled, every method of a RTSC module supports both "entry" and "exit" events: on entry to a method, the method's name and its arguments are marshalled into an "entry" (<tt>Diags_ENTRY</tt>) event and, on return from the method, the method's name and return value are marshalled into an "exit" (<tt>Diags_EXIT</tt>) event.
</p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;examples/runtime/Mod.h&gt;</span>
&nbsp;
<span class="kw2">int</span> main<span class="br0">&#40;</span><span class="kw2">int</span> argc, <span class="kw2">String</span> argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="coMULTI">/* call a &quot;module-wide&quot; method */</span>
    Mod_foo<span class="br0">&#40;</span><span class="nu0">100</span>, <span class="st0">&quot;a string&quot;</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="kw1">return</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br /></tt></td><td class="codexBody"><pre>examples.runtime.Mod: --&gt; foo: (100, &quot;a string&quot;)</pre></td></tr></table>
</td></tr></table>
<p>Notice that the application never referenced <tt>Log</tt> or <tt>Diags</tt> and only calls the <tt>Mod_foo()</tt> method of the <tt>Mod</tt> module.  Because we enabled "entry" events and specified <tt>LoggerSys</tt> as the default <tt>ILogger</tt> service provider, an "entry" event is generated on every call to any <tt>Mod</tt> method and this event is displayed by <tt>LoggerSys</tt>.  The displayed entry event contains the name of the module, the name of the method, and the values of all arguments to the method.
</p><p>RTSC modules support <i>both</i> "entry" events and "exit" events, so where is the output for the exit or return from <tt>Mod_foo()</tt>?  In order to cause "exit" events to be generated, we need to return to the configuration file and enable these events.
</p>
<div id="cl-1:+"></div><div id="cl-hello_config:+"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.cfg</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">+</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Mod = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;examples.runtime.Mod&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Diags = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Diags&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* enable runtime controllable diagnostics in all modules (by default) */</span>
Defaults.common$.diags_ENTRY = Diags.RUNTIME_ON;
&nbsp;
Mod.common$.diags_EXIT = Diags.RUNTIME_ON;  <span class="coMULTI">/* enable Mod exit events only */</span>
&nbsp;
<span class="coMULTI">/* use the LoggerSys ILogger service provider */</span>
<span class="kw1">var</span> Logger = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.LoggerSys&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* create an ILogger instance and make it the default program-wide logger */</span>
Defaults.common$.logger = Logger.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<p>With <tt>Mod</tt> exit events enabled, a second line of output from the logger (prefixed by the sequence "<tt>&lt;--</tt>") shows both the name of the method and its return value (if there is any).
</p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;examples/runtime/Mod.h&gt;</span>
&nbsp;
<span class="kw2">int</span> main<span class="br0">&#40;</span><span class="kw2">int</span> argc, <span class="kw2">String</span> argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="coMULTI">/* call a &quot;module-wide&quot; method */</span>
    Mod_foo<span class="br0">&#40;</span><span class="nu0">100</span>, <span class="st0">&quot;a string&quot;</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="kw1">return</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre>examples.runtime.Mod: --&gt; foo: (100, &quot;a string&quot;)
examples.runtime.Mod: &lt;-- foo: 1</pre></td></tr></table>
</td></tr></table>
<p>Notice that we only enable "exit" events for the <tt>Mod</tt> module rather than making this setting the default for all modules as we did for "entry" events.  Either would work for this example, but "entry" events are often sufficient to understand the operation of the application and, however small the logging overhead is, we don't want to add <i>any</i> unnecessary overhead.  On the other hand, there are times when "exit" events can be vital to properly deciphering the operation of an application - especially in multi-threaded environments.
</p>
<a name="Instance_Life-cycle_Events"></a><h2> <span class="mw-headline">Instance Life-cycle Events</span></h2>
<p>Like C++ (or Java) classes, RTSC modules often support instance object creation.  While the implicit method event generation shown above might be sufficient in some cases, RTSC distinguishes the instance creation/deletion methods from "ordinary" methods: there is a separate "life-cycle" (<a href="../../cdoc/xdc/runtime/Diags.html#.Diags_.L.I.F.E.C.Y.C.L.E" class="cdoc"><tt>Diags_LIFECYCLE</tt></a>) event type that is used exclusively for these methods.
</p>
<div id="cl-1:+"></div><div id="cl-hello_config:+"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.cfg</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">+</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Mod = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Mod&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Diags = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Diags&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* enable runtime controllable diagnostics in all modules (by default) */</span>
Defaults.common$.diags_ENTRY = Diags.RUNTIME_ON;
&nbsp;
Mod.common$.diags_EXIT = Diags.RUNTIME_ON;       <span class="coMULTI">/* enable Mod exit events only */</span>
Mod.common$.diags_LIFECYCLE = Diags.RUNTIME_ON;  <span class="coMULTI">/* enable Mod lifecycle events only */</span>
&nbsp;
<span class="coMULTI">/* use the LoggerSys ILogger service provider */</span>
<span class="kw1">var</span> Logger = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.LoggerSys&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* create an ILogger instance and make it the default program-wide logger */</span>
Defaults.common$.logger = Logger.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<p>Given this new configuration it's instructive to walk through a test application and correlate its calls with the <tt>Log</tt> event output.  Each line of the output below has been numbered and each of these numbers appears next to the line in the test that generates the output.  A complete explanation of each output line appears below.
</p>
<table>

<tr valign="top">
<td><div id="cl-2:1"></div><div id="cl-instance_app:1"></div><div id="cl-2:2,3"></div><div id="cl-instance_app:2,3"></div><div id="cl-2:4"></div><div id="cl-instance_app:4"></div><div id="cl-2:5,6"></div><div id="cl-instance_app:5,6"></div><div id="cl-2:7"></div><div id="cl-instance_app:7"></div><div id="cl-2:8"></div><div id="cl-instance_app:8"></div><div id="cl-2:9"></div><div id="cl-instance_app:9"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">1</span><br />&nbsp;<br />&nbsp;<br /><span class="codexLab">2,3</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">4</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">5,6</span><br />&nbsp;<br />&nbsp;<br /><span class="codexLab">7</span><br /><span class="codexLab">8</span><br />&nbsp;<br />&nbsp;<br /><span class="codexLab">9</span><br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;examples/runtime/Mod.h&gt;</span>
&nbsp;
<span class="kw2">int</span> main<span class="br0">&#40;</span><span class="kw2">int</span> argc, <span class="kw2">String</span> argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    Mod_Params prms;
    Mod_Handle heapInst, stackInst;
    Mod_Struct struc;
    <span class="coMULTI">/* create a heap-based instance  */</span>
    Mod_Params_init<span class="br0">&#40;</span>&amp;prms<span class="br0">&#41;</span>;
    prms.instance-&gt;name = <span class="st0">&quot;myHeapInst&quot;</span>;
    heapInst = Mod_create<span class="br0">&#40;</span>&amp;prms, <span class="kw2">NULL</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* call a per-instance function */</span>
    Mod_bar<span class="br0">&#40;</span>heapInst<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* construct a stack-based instance */</span>
    prms.instance-&gt;name = <span class="st0">&quot;myStackInst&quot;</span>;
    Mod_construct<span class="br0">&#40;</span>&amp;struc, &amp;prms<span class="br0">&#41;</span>;
    stackInst = Mod_handle<span class="br0">&#40;</span>&amp;struc<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* call bar on &quot;stack&quot; instance */</span>
    Mod_bar<span class="br0">&#40;</span>stackInst<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* delete the heap instance, twice! */</span>
    Mod_delete<span class="br0">&#40;</span>&amp;heapInst<span class="br0">&#41;</span>;
    Mod_delete<span class="br0">&#40;</span>&amp;heapInst<span class="br0">&#41;</span>; 
&nbsp;
    <span class="coMULTI">/* delete the &quot;stack&quot; instance */</span>
    Mod_destruct<span class="br0">&#40;</span>&amp;struc<span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><div id="cl-3:1"></div><div id="cl-instance_output:1"></div><div id="cl-3:2"></div><div id="cl-instance_output:2"></div><div id="cl-3:3"></div><div id="cl-instance_output:3"></div><div id="cl-3:4"></div><div id="cl-instance_output:4"></div><div id="cl-3:5"></div><div id="cl-instance_output:5"></div><div id="cl-3:6"></div><div id="cl-instance_output:6"></div><div id="cl-3:7"></div><div id="cl-instance_output:7"></div><div id="cl-3:8"></div><div id="cl-instance_output:8"></div><div id="cl-3:9"></div><div id="cl-instance_output:9"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab"><span class="codexLab">1</span><br /><span class="codexLab">2</span><br /><span class="codexLab">3</span><br /><span class="codexLab">4</span><br /><span class="codexLab">5</span><br /><span class="codexLab">6</span><br /><span class="codexLab">7</span><br /><span class="codexLab">8</span><br /><span class="codexLab">9</span><br /></tt></td><td class="codexBody"><pre>examples.runtime.Mod: &lt;-- create: @08051010('(null)')
examples.runtime.Mod: --&gt; bar: (@08051010)
examples.runtime.Mod: &lt;-- bar: 110
examples.runtime.Mod: &lt;-- construct: @bffff21c('(null)')
examples.runtime.Mod: --&gt; bar: (@bffff21c)
examples.runtime.Mod: &lt;-- bar: 110
examples.runtime.Mod: --&gt; delete: (@08051010)
examples.runtime.Mod: --&gt; delete: (@00000000)
examples.runtime.Mod: --&gt; destruct: (@bffff21c)</pre></td></tr></table>
</td></tr></table>
<p>The output messages are annotated below.
</p>
<dl><dd><table cellspacing="10" cellpadding="5">

<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:1"><span class="codexLink">1</span></a>
</td><td>create a new <tt>Mod</tt> instance from a heap; the address of the instance is displayed
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:2"><span class="codexLink">2</span></a>,<a class="codexLink" href="#cl-instance_output:3"><span class="codexLink">3</span></a>
</td><td>call the instance method <tt>bar</tt>; the name of the method, the parameters to the method, and its return value are displayed
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:4"><span class="codexLink">4</span></a>
</td><td>construct a new <tt>Mod</tt> instance from stack memory; like the heap-based instance, the address of the instance is displayed
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:5"><span class="codexLink">5</span></a>,<a class="codexLink" href="#cl-instance_output:6"><span class="codexLink">6</span></a>
</td><td>call the <tt>bar</tt> method again but this time with the new stack-based instance
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:7"><span class="codexLink">7</span></a>
</td><td>delete the heap-based instance; the address of the instance being deleted is displayed
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:8"><span class="codexLink">8</span></a>
</td><td>delete the heap-based instance <i>again</i>; notice that the address displayed in this case is <tt>00000000</tt>.  This is not an error - module instance <tt>delete</tt> methods automatically nullify instance handles the first time they are deleted (to prevent heap corruption that would arise if an application inadvertently frees instance memory twice).  Subsequent redundent deletes are detected (by a <tt>NULL</tt> instance handle) and silently ignored.
</td></tr>
<tr valign="top">
<td><a class="codexLink" href="#cl-instance_output:9"><span class="codexLink">9</span></a>
</td><td>destruct the stack-based instance; as with the heap-based instance, the address of the instance being destructed is displayed.
</td></tr></table></dd></dl>
<p>Unless you specify otherwise, space required to hold a pointer to a name is <i>not</i> reserved in instance objects and, as a result, the "life-cycle" events above did <i>not</i> provide the names of the instances that were specified in the application; the string  " <tt>(null)</tt> " appears where the instance name would normally be displayed.  Applications with thousands of instance objects can rarely afford the convenience of maintaining a unique symbolic name for every object.  Once again, to enable symbolic instance name support (and the one extra word of overhead per instance object) we return to the configuration file and add this support for just the <tt>Mod</tt> module.
</p>
<div id="cl-3:+"></div><div id="cl-instance_output:+"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.cfg</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">+</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Mod = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;examples.runtime.Mod&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Diags = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Diags&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* enable runtime controllable diagnostics in all modules (by default) */</span>
Defaults.common$.diags_ENTRY = Diags.RUNTIME_ON;
&nbsp;
Mod.common$.diags_EXIT = Diags.RUNTIME_ON;       <span class="coMULTI">/* enable Mod exit events only */</span>
Mod.common$.diags_LIFECYCLE = Diags.RUNTIME_ON;  <span class="coMULTI">/* enable Mod lifecycle events only */</span>
Mod.common$.namedInstance = <span class="kw2">true</span>;                <span class="coMULTI">/* enable Mod instance names  */</span>
&nbsp;
<span class="coMULTI">/* use the LoggerSys ILogger service provider */</span>
<span class="kw1">var</span> Logger = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.LoggerSys&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* create an ILogger instance and make it the default program-wide logger */</span>
Defaults.common$.logger = Logger.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre>examples. runtime.Mod: &lt;-- create: @08051010('myHeapInst')
examples. runtime.Mod: --&gt; bar: (@08051010)
examples. runtime.Mod: &lt;-- bar: 110
examples. runtime.Mod: &lt;-- construct: @bffff21c('myStackInst')
examples. runtime.Mod: --&gt; bar: (@bffff21c)
examples. runtime.Mod: &lt;-- bar: 110
examples. runtime.Mod: --&gt; delete: (@08051010)
examples. runtime.Mod: --&gt; delete: (@00000000)
examples. runtime.Mod: --&gt; destruct: (@bffff21c)</pre></td></tr></table>
</td></tr></table>
<p>Setting <tt>namedInstance</tt> to <tt>true</tt> enables the name of these instances to be displayed (instead of <tt>(null)</tt> as above) at the expense of one word per instance which is used to retain a pointer to the name.
</p>
<a name="See_also"></a><h2> <span class="mw-headline">See also</span></h2>
<p></p>
<table id="TOC" class="DocList">

<tr>
<td class="DocListTitle1" style="width:35%;"><a href="Using_xdc.runtime_Logging__Example_1.html" title="Using xdc.runtime Logging/Example 1">Using xdc.runtime Logging/Example 1</a>
</td><td class="DocListSubTitle1">Classic "hello world" using <tt>Log</tt>
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="Using_xdc.runtime_Logging__Example_3.html" title="Using xdc.runtime Logging/Example 3">Using xdc.runtime Logging/Example 3</a>
</td><td class="DocListSubTitle">Adding logging to existing code bases
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="Using_xdc.runtime_Logging__Example_4.html" title="Using xdc.runtime Logging/Example 4">Using xdc.runtime Logging/Example 4</a>
</td><td class="DocListSubTitle">Adding Logging to RTSC Modules
</td></tr></table>
<p></p>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Logging/Example 2&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="Using_xdc.runtime_Logging__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_left.png" /></a>&nbsp;<a href="Using_xdc.runtime_Logging.html#TOC" title="Using xdc.runtime Logging"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Using_xdc.runtime_Logging__Example_3.html" title="Example 3"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>
</p>
<!-- 
Pre-expand include size: 2367 bytes
Post-expand include size: 1173 bytes
Template argument size: 114 bytes
Maximum: 2097152 bytes
-->

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Using_xdc.runtime_Logging.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.318 secs. --></body></html>
