<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Using xdc.runtime Errors - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Errors&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Using xdc.runtime Errors" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Using_This_Package" title="Overview_of_xdc.runtime#Using_This_Package"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Using_xdc.runtime_Errors__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><p id="title">Using xdc.runtime Errors</p><p id="subtitle">How to raise and handle runtime errors</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Architecture"><span class="tocnumber">2.1</span> <span class="toctext">Architecture</span></a></li>
<li class="toclevel-2"><a href="#Configuration"><span class="tocnumber">2.2</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1"><a href="#Performance_Considerations"><span class="tocnumber">4</span> <span class="toctext">Performance Considerations</span></a>
<ul>
<li class="toclevel-2"><a href="#Eliminating_File_Name_Strings"><span class="tocnumber">4.1</span> <span class="toctext">Eliminating File Name Strings</span></a></li>
<li class="toclevel-2"><a href="#Eliminating_Error_and_Assert_Message_Strings"><span class="tocnumber">4.2</span> <span class="toctext">Eliminating Error and Assert Message Strings</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction"></a><h2> <span class="mw-headline">Introduction</span></h2>
<p>The <tt>xdc.runtime</tt> package contains several modules that work together to provide rich application diagnostic support that can be controlled in real-time within deployed systems.  This section focuses on those modules that are used to raise and handle errors and provide assertion support: <tt><a href="../../cdoc/xdc/runtime/Error.html" class="cdoc"><tt>Error</tt></a></tt> and <tt><a href="../../cdoc/index.html#xdc/runtime/Assert.html" class="cdoc"><tt>Assert</tt></a></tt>, respectively.  
</p><p>Use of these modules is illustrated below by a series of examples that take advantage of two other distinguished <tt>xdc.runtime</tt> modules:
</p>
<ol><li><tt><a href="../../cdoc/xdc/runtime/Main.html" class="cdoc"><tt>Main</tt></a></tt> - a module whose configuration applies to all code that is <i>not</i> a RTSC module; e.g., existing C code bases, and
</li><li><tt><a href="../../cdoc/xdc/runtime/Defaults.html" class="cdoc"><tt>Defaults</tt></a></tt> - a module whose configuration applies to all RTSC modules (including <tt>Main</tt>), unless explicitly overridden on a per-module basis.
</li></ol>
<a name="Overview"></a><h2> <span class="mw-headline">Overview</span></h2>
<p>Each embedded application runs in a unique environment with specific resource requirements and, as a result, adopts application-specific <i>policies</i> for managing runtime errors; e.g., reset-and-reboot, catch-and-retry, log-and-continue, or a combination of these policies for different parts of the system.  The <tt>xdc.runtime</tt> package provides a set of mechanisms for raising and handling runtime errors that enables code to be written once and used in <i>any</i> application - independent of the application's error handling policies.
</p>
<a name="Architecture"></a><h3> <span class="mw-headline">Architecture</span></h3>
<p>The <tt>xdc.runtime</tt> package supports two distinct "categories" of error: 
</p>
<ol><li><i>errors</i> that are explicitly checked for and handled by the code, and 
</li><li><i>assertion violations</i> that arise when the current application state is inconsistent with the range of states required by a piece of code.
</li></ol>
<p>The first category of errors are managed by the <tt>Error</tt> module and the second category is managed by the <tt>Assert</tt> module.  Rather than use simple fixed-length error numbers, the <tt>xdc.runtime</tt> package uniformly employs an opaque <tt>Error_Block</tt> structure to "raise" errors via <tt>Error_raise()</tt>.  Functions that raise errors are passed a pointer to an <tt>Error_Block</tt> structure which is passed to <tt><a href="../../cdoc/xdc/runtime/Error.html#raise" class="cdoc"><tt>Error_raise</tt></a></tt> when an error is detected.  When an error is raised, the <tt>Error_Block</tt> structure records the source of the error, a unique ID for for the error, a message format string, and up to two arguments associated with this particular occurrence.  
</p><p>Using an <tt>Error_Block</tt> structure has several advantages.  Perhaps most importantly, the information about the source of the error as well as data specific to the particular occurrence are efficiently copied into the structure for later processing.  In effect, <tt>Error_raise()</tt> combines the efficiency of a simple error code with the richness of a <tt>printf</tt> at the site of the error.  Since the error information is simply recorded in the <tt>Error_block</tt> structure, the application developer can control when and how the information will be formatted and displayed. 
</p><p>Similar to the standard C <tt>assert()</tt> macro, the <tt>Assert</tt> module's methods are interspersed with other code to add runtime checks - primarily during early development - that ensure the code is being called in the appropriate context. Unlike the standard C assert support, the <tt>Assert</tt> module provides greater flexibility in managing the messages displayed, the message string space overhead, and the runtime handling of failures. In addition, because the <tt>Assert</tt> methods build atop the <tt>Diags</tt> module, you can precisely control which assertions remain in the final application, if any.
</p><p>When an assertion violation is detected, an <tt><a href="../../cdoc/xdc/runtime/Assert.html#/.E_assert/.Failed" class="cdoc"><tt>Assert.E_assertFailed</tt></a></tt> error is raised (via <tt>Error_raise()</tt>) with a <tt>NULL</tt> <tt>Error_Block</tt> reference; so, assertions are handled using the same error handling hooks as "normal" errors.
</p>
<a name="Configuration"></a><h3> <span class="mw-headline">Configuration</span></h3>
<p>Users of libraries that embed <tt>xdc.runtime.Assert</tt> statements can configure their application to specify:
</p>
<ul><li>on a per-module basis, what assertions should be evaluated and whether these assertions are always enabled (disabled) or whether they can be enabled and disabled at runtime via <tt>Diags_setmask()</tt>
</li><li>on a per application basis whether errors should terminate the application or "unwind" to the caller
</li><li>on a per application basis, a custom error handler
</li></ul>
<p>These configuration options make it possible for the system integrator to strike a balance between the need for runtime error checking against the overhead required for these checks <i>without making any changes</i> to the code containing embedded <tt>Error</tt> or <tt>Assert</tt> statements.  Even better, these options are possible <i>without requiring re-compilation of any source code</i> making it possible to (re)configure pre-built <i>binary</i> libraries that utilize <tt>xdc.runtime.Error</tt> or <tt>xdc.runtime.Assert</tt> methods.
</p>
<a name="Examples"></a><h2> <span class="mw-headline">Examples</span></h2>
<p><br />
In the table below, we provide a series of graduated examples that illustrate the key capabilities of this package and provide links to more advanced topics.
</p>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tr>
<th align="center"> <b>Example</b>
</th><th align="center"> <b>Description</b>
</th><th align="center"> <b>Purpose</b>
</th></tr>
<tr>
<td align="left"> <a href="Using_xdc.runtime_Errors__Example_1.html" title="Using xdc.runtime Errors/Example 1">Example 1</a>
</td><td align="left"> Using <tt>Error</tt> to raise and "catch" errors
</td><td align="left"> a minimal example to illustrate using <tt>Error</tt> in existing code bases
</td></tr>
<tr>
<td align="left"> <a href="Using_xdc.runtime_Errors__Example_2.html" title="Using xdc.runtime Errors/Example 2">Example 2</a>
</td><td align="left"> Using <tt>Assert</tt> to perform runtime checks
</td><td align="left"> a minimal example to illustrate using <tt>Assert</tt> in existing code bases
</td></tr>
<tr>
<td align="left"> <a href="Using_xdc.runtime_Errors__Example_3.html" title="Using xdc.runtime Errors/Example 3">Example 3</a>
</td><td align="left"> Creating an Error handler
</td><td align="left"> illustrate how to bind a custom error handler
</td></tr>
<tr>
<td align="left"> <a href="Using_xdc.runtime_Errors__Example_4.html" title="Using xdc.runtime Errors/Example 4">Example 4</a>
</td><td align="left"> Creating new Error Ids
</td><td align="left"> illustrate how to create new Error Descriptors
</td></tr>
<tr>
<td align="left"> <a href="Using_xdc.runtime_Errors__Example_5.html" title="Using xdc.runtime Errors/Example 5">Example 5</a>
</td><td align="left"> Logging All Errors
</td><td align="left"> illustrate custom error handler that logs all errors
</td></tr></table>
<a name="Performance_Considerations"></a><h2> <span class="mw-headline">Performance Considerations</span></h2>
<p>In this section we review the performance impact of using <tt>Error</tt> and <tt>Assert</tt>.  In addition, we provide techniques for balancing the overhead against increased per error information.
</p>
<a name="Eliminating_File_Name_Strings"></a><h3> <span class="mw-headline">Eliminating File Name Strings</span></h3>
<p>Unless otherwise specified, both <tt>Error_raise()</tt> and <tt>Assert_isTrue()</tt> pass the file name of the caller (<tt>__FILE__</tt>) to the underlying functions that handle errors.  As a result, there are a number of static strings that are embedded in any application that uses <tt>Error</tt> or <tt>Assert</tt>.  To eliminate these strings you can add the following line, <i>before</i> including <tt>xdc/runtime/Error.h</tt> or <tt>xdc/runtime/Assert.h</tt>, to each source file.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#define</span> xdc_FILE <span class="kw2">NULL</span>    <span class="coMULTI">/* eliminate use of __FILE__ in Assert and Error macros */</span></pre></td></tr></table>
<p>Alternatively, you can add the equivalent <tt>-D</tt> option to your compiler's command line.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br /></tt></td><td class="codexBody"><pre>cl -Dxdc_FILE=NULL ...</pre></td></tr></table>
<a name="Eliminating_Error_and_Assert_Message_Strings"></a><h3> <span class="mw-headline">Eliminating <tt>Error</tt> and <tt>Assert</tt> Message Strings</span></h3>
<p>As with the <tt>Log</tt> module, the strings associated with an error or assertion descriptors can be entirely eliminated from the target's memory.  These strings can be stored and used on a "diagnostic" client that has less constrained resources.
</p><p>To eliminate the runtime strings you must configure the <tt><a href="../../cdoc/xdc/runtime/Text.html" class="cdoc"><tt>Text</tt></a></tt> module to place all strings in a special section that will not be loaded onto the target.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Text = <span class="re1">xdc.module</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Text&quot;</span><span class="br0">&#41;</span>;
Text.isLoaded = <span class="kw2">false</span>;</pre></td></tr></table>
<p>In addition to message strings used in <tt>Error</tt> and <tt>Assert</tt> descriptors, the <tt>Text</tt> module maintains the string names of all modules and (optionally) instances are also maintained on the target. Setting <tt>Text.isLoaded</tt> to <tt>false</tt> will also eliminate these string names.  Again, in systems where space is a precious resource, it is sometimes necessary to eliminate these "conveniences" in favor of other critical data.
</p>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Errors&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Using xdc.runtime Errors" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Using_This_Package" title="Overview_of_xdc.runtime#Using_This_Package"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Using_xdc.runtime_Errors__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>
<!-- 
Pre-expand include size: 1074 bytes
Post-expand include size: 727 bytes
Template argument size: 140 bytes
Maximum: 2097152 bytes
-->

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Using_xdc.runtime_Errors.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.267 secs. --></body></html>
