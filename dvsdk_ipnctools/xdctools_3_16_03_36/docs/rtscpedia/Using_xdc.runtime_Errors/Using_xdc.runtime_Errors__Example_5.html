<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Using xdc.runtime Errors/Example 5 - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Errors/Example 5&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="Using_xdc.runtime_Errors__Example_4.html" title="Example 4"><img src="../common/extensions/rtsc/images/Arrow_left.png" /></a>&nbsp;<a href="Using_xdc.runtime_Errors.html#TOC" title="Using xdc.runtime Errors"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a></td></tr></table><p id="title">Using xdc.runtime Errors/Example 5</p><p id="subtitle">Creating a logging error handler</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#A_Logging_Error_Handler"><span class="tocnumber">1</span> <span class="toctext">A Logging Error Handler</span></a></li>
<li class="toclevel-1"><a href="#Using_the_Logging_Error_Handler"><span class="tocnumber">2</span> <span class="toctext">Using the Logging Error Handler</span></a></li>
<li class="toclevel-1"><a href="#Implementation_of_the_Logging_Error_Handler"><span class="tocnumber">3</span> <span class="toctext">Implementation of the Logging Error Handler</span></a>
<ul>
<li class="toclevel-2"><a href="#The_ErrLog_module"><span class="tocnumber">3.1</span> <span class="toctext">The ErrLog module</span></a></li>
<li class="toclevel-2"><a href="#The_package_files"><span class="tocnumber">3.2</span> <span class="toctext">The package files</span></a></li>
<li class="toclevel-2"><a href="#Why_create_a_module.3F"><span class="tocnumber">3.3</span> <span class="toctext">Why create a module?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="A_Logging_Error_Handler"></a><h2> <span class="mw-headline">A Logging Error Handler</span></h2>
<p>In this example we show how to create and "install" a custom error handler that simply logs errors.  Each error raised by an application is logged to a special logger.  This allows one to easily see a complete list of each error that occurs during the operation of the system <i>without changing or recompiling any components that raise errors</i>.  
</p><p>In the example below, we create a module named <tt>ErrLog</tt>.  This module supplies an <tt>Error</tt> "raise hook" that logs errors to the logger associated with the <tt>ErrLog</tt> module itself. So, to trace all errors raised in the system, you simply assign your preferred logger instance to the <tt>ErrLog</tt> module's logger.  <a href="../Using_xdc.runtime_Logging/Using_xdc.runtime_Logging.html" title="Using xdc.runtime Logging">Logging Example 1</a> shows how to set a module's logger.
</p><p>While it is obvious that an <tt>Error</tt> raise hook can simply call <a href="../../cdoc/xdc/runtime/Log.html#print6" class="cdoc"><tt>Log_print</tt></a> or <a href="../../cdoc/index.html#xdc/runtime/Log.html#write8" class="cdoc"><tt>Log_write</tt></a>, this particular <tt>Error</tt> raise hook uses <a href="../../cdoc/index.html#xdc/runtime/Log.html#put8" class="cdoc"><tt>Log_put</tt></a> to record events that appear to come directly from the caller of <a href="../../cdoc/index.html#xdc/runtime/Error.html#raise" class="cdoc"><tt>Error_raise</tt></a>.  To see why this is useful, we first look at the behavior of this hook in a simple application.  We then examine the implementation of this error handler.
</p>
<a name="Using_the_Logging_Error_Handler"></a><h2> <span class="mw-headline">Using the Logging Error Handler</span></h2>
<p>To illustrate the use of the logging <tt>Error</tt> handler, <tt>ErrLog</tt>, we start with a contrived example application, <tt>app.c</tt>, that uses the <tt>Error</tt> module to raise and check for errors.  The <tt>ErrLog</tt> module developed in this example provides a single method; an <tt>Error</tt> raise hook compatible function named <tt>ErrLog_raiseHook</tt>.  
</p><p>By configuring <tt>Error.raiseHook</tt> to be this function, without changin any application sources <i>all</i> errors are logged.  This has the advantage that you can track all errors that occur in an application and the overhead of capturing these errors is quite small.  No formatting or interpretation of errors occurs, the raw data is simply recorded for later analysis.
</p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Error.h&gt;</span>
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/System.h&gt;</span>
&nbsp;
<span class="coMULTI">/* ======== main ======== */</span>
<span class="kw2">Int</span> main<span class="br0">&#40;</span><span class="kw2">Int</span> argc, <span class="kw2">String</span> argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    Error_Block eb;
&nbsp;
    <span class="coMULTI">/* must initialize prior to first use */</span>
    Error_init<span class="br0">&#40;</span>&amp;eb<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* call a function that raises an error */</span>
    System_printf<span class="br0">&#40;</span><span class="st0">&quot;half returned&nbsp;%d<span class="es0">\n</span>&quot;</span>,
        half<span class="br0">&#40;</span><span class="nu0">17</span>, &amp;eb<span class="br0">&#41;</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* return 1 if an error occurred */</span>
    <span class="kw1">return</span> <span class="br0">&#40;</span>Error_check<span class="br0">&#40;</span>&amp;eb<span class="br0">&#41;</span>&nbsp;? <span class="nu0">1</span>&nbsp;: <span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="coMULTI">/* ======== half ======== */</span>
<span class="kw2">Int</span> half<span class="br0">&#40;</span><span class="kw2">Int</span> num, Error_Block *eb<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>num &amp; 0x1<span class="br0">&#41;</span>&nbsp;!= <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        Error_raise<span class="br0">&#40;</span>eb, Error_E_generic, 
            <span class="st0">&quot;num must be even&quot;</span>, <span class="kw2">NULL</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw1">return</span> <span class="br0">&#40;</span>num / <span class="nu0">2</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>app.cfg</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Error  = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Error&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> System = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.System&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> Diags = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Diags&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* import the ErrLog module */</span>
<span class="kw1">var</span> ErrLog = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span>
    <span class="st0">&quot;examples.runtime.errors.ErrLog&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* force all errors to call ErrLog_raiseHook() */</span>
Error.raiseHook = ErrLog.raiseHook;
&nbsp;
<span class="coMULTI">/* use LoggerSys for the application's logs */</span>
<span class="kw1">var</span> Logger = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.LoggerSys&quot;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* configure the default logger (and ErrLog's logger) */</span> 
<span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
Defaults.common$.logger = Logger.create<span class="br0">&#40;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="coMULTI">/* ErrLog only logs errors when USER1 Diags are enabled */</span>
Defaults.common$.diags_USER1 = Diags.RUNTIME_ON;</pre></td></tr></table>
</td></tr></table>
<p>Using the configuration above, the output of running <tt>app.c</tt> is shown below.  
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>Output</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre>xdc.runtime.Main: Error 0: errId 0xe20011, modId 0x800b, &quot;app.c&quot;, line 39
half returned 8</pre></td></tr></table>
<p>Notice that the "source" of the <tt>Log</tt> event reporting the error is <i>not</i> the <tt>ErrLog</tt> module.  Instead the source of the event is the source of the original error, <tt>xdc.runtime.Main</tt>.  The <tt>ErrLog</tt> module appears to have magically arranged for all <tt>Error_raise</tt> calls to be immediately proceeded by a call to <tt>Log_write</tt>.  The next section shows how <tt>ErrLog</tt> really works.
</p>
<a name="Implementation_of_the_Logging_Error_Handler"></a><h2> <span class="mw-headline">Implementation of the Logging Error Handler</span></h2>
<p>In this section we show the entire implementation of the <tt>ErrLog</tt> module as well as all package files necessary to build and deliver the <tt>ErrLog</tt> module to anyone wishing to use it.
</p>
<a name="The_ErrLog_module"></a><h6> <span class="mw-headline">The <tt>ErrLog</tt> module</span></h6>
<p><span class="Leader">The <tt>ErrLog</tt> module</span>.&nbsp; The <tt>ErrLog</tt> module specification is shown below.
</p>
<div id="cl-1:1"></div><div id="cl-ErrLog_spec:1"></div><div id="cl-1:2"></div><div id="cl-ErrLog_spec:2"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>ErrLog.xdc</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">1</span><br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">2</span><br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">import</span> xdc.runtime.Log;
<span class="kw1">import</span> xdc.runtime.Diags;
<span class="kw1">import</span> xdc.runtime.Error;
&nbsp;
<span class="kw1">module</span> ErrLog
<span class="br0">&#123;</span>
    <span class="xdoc">/*! Log Event used to log all errors */</span>
    <span class="kw1">config</span> Log.Event LOGEVENT = <span class="br0">&#123;</span>
        mask: Diags.USER1,
        msg: <span class="st0">&quot;Error&nbsp;%d: errId 0x%x, modId 0x%x, <span class="es0">\&quot;</span>%s<span class="es0">\&quot;</span>, line&nbsp;%d&quot;</span>
    <span class="br0">&#125;</span>;
&nbsp;
    <span class="xdoc">/*! Error raise hook function that logs errors */</span>
    <span class="kw2">Void</span> raiseHook<span class="br0">&#40;</span>Error.Block *err<span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
<p>This specification declares a single function, <tt>raiseHook</tt> <a class="codexLink" href="#cl-ErrLog_spec:2"><span class="codexLink">2</span></a>, compatible with the <tt>Error</tt> <a href="../../cdoc/xdc/runtime/Error.html#raise.Hook" class="cdoc"><tt>raise hook</tt></a> configuration parameter and defines a new <tt>Log</tt> event, creatively named <tt>LOGEVENT</tt> <a class="codexLink" href="#cl-ErrLog_spec:1"><span class="codexLink">1</span></a>, that is used to log all errors.
</p><p>Since <tt>ErrLog</tt> only specifies a single method, <tt>ErrLog_errorRaise()</tt>, and the declared <tt>Log_Event</tt> <tt>LOGEVENT</tt> is automatically defined in the configuration generated C file, the <tt>ErrLog</tt> module's C implementation (<tt>ErrLog.c</tt>) is quite small.  Except for necessary headers, there are just three lines of functional code!
</p>
<div id="cl-2:1"></div><div id="cl-ErrLog_c:1"></div><div id="cl-2:2"></div><div id="cl-ErrLog_c:2"></div><div id="cl-2:3"></div><div id="cl-ErrLog_c:3"></div><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>ErrLog.c</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /><span class="codexLab">1</span><br />&nbsp;<br />&nbsp;<br /><span class="codexLab">2</span><br />&nbsp;<br />&nbsp;<br /><span class="codexLab">3</span><br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="c"><span class="re1">#include</span> <span class="re2">&lt;xdc/std.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Log.h&gt;</span>
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Error.h&gt;</span>
<span class="re1">#include</span> <span class="re2">&lt;xdc/runtime/Types.h&gt;</span>
&nbsp;
<span class="re1">#include</span> <span class="st0">&quot;package/internal/ErrLog.xdc.h&quot;</span>
&nbsp;
<span class="coMULTI">/* ======== ErrLog_raiseHook ======== */</span>
<span class="kw2">Void</span> ErrLog_raiseHook<span class="br0">&#40;</span>Error_Block *eb<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="coMULTI">/* extract call site information from the error block */</span>
    Types_Site *site = Error_getSite<span class="br0">&#40;</span>eb<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* compose an event with the error block's call site information */</span>
    Types_Event evt = Types_makeEvent<span class="br0">&#40;</span>Log_getEventId<span class="br0">&#40;</span>ErrLog_LOGEVENT<span class="br0">&#41;</span>, site-&gt;mod<span class="br0">&#41;</span>;
&nbsp;
    <span class="coMULTI">/* &quot;put&quot; this new event into the ErrLog module's log */</span>
    Log_put8<span class="br0">&#40;</span>evt, Error_getCode<span class="br0">&#40;</span>eb<span class="br0">&#41;</span>, Error_getId<span class="br0">&#40;</span>eb<span class="br0">&#41;</span>,
        site-&gt;mod, <span class="br0">&#40;</span>IArg<span class="br0">&#41;</span>site-&gt;file, site-&gt;line, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
<p>Although the <tt>ErrLog</tt> module's <tt>raiseHook</tt> function only has three lines of code, it leverages relatively advanced features of the <tt>Log</tt> and <tt>Types</tt> modules.  While it's beyond the scope of this example to provide a detailed explanation of how this function works, the following outline should provide sufficient background for those who wish to learn more.
</p>
<dl><dd><a class="codexLink" href="#cl-ErrLog_c:1"><span class="codexLink">1</span></a> - <tt>Error_Block</tt>s contain the call site where the call to <tt>Error_raise</tt> was made, on this line we extract this information via <tt><a href="../../cdoc/xdc/runtime/Error.html#get.Site" class="cdoc"><tt>Error_getSite()</tt></a></tt> so that in the next line we can construct a <tt><a href="../../cdoc/index.html#xdc/runtime/Types.html#.Event" class="cdoc"><tt>Types_Event</tt></a></tt> that appears to come from the same place.
</dd><dd><a class="codexLink" href="#cl-ErrLog_c:2"><span class="codexLink">2</span></a> - here we construct a <tt>Types_Event</tt>, the event type handled by <tt><a href="../../cdoc/xdc/runtime/ILogger.html" class="cdoc"><tt>ILogger</tt></a></tt>s.  To construct this event we need a call site (from the line above) and an "event id".  In this case, we use the <tt><a href="../../cdoc/index.html#xdc/runtime/Log.html#get.Event.Id" class="cdoc"><tt>Log_getEventId()</tt></a></tt> to get the id of the <tt>LOGEVENT</tt> event defined by the <tt>ErrLog</tt> module's specification.
</dd><dd><a class="codexLink" href="#cl-ErrLog_c:3"><span class="codexLink">3</span></a> - now that we've constructed an event we simply need to put the event, and the arguments assumed by the event, to some event logger.  We use <tt><a href="../../cdoc/xdc/runtime/Log.html#put8" class="cdoc"><tt>Log_put8()</tt></a></tt> to pass the event to the logger associated with the current module, <tt>ErrLog</tt>.
</dd></dl>
<a name="The_package_files"></a><h6> <span class="mw-headline">The package files</span></h6>
<p><span class="Leader">The package files</span>.&nbsp;  Since all modules must live in a package we also need to create a two other files:
</p>
<ol><li><tt>package.xdc</tt> - a file that define the package's name and identifies the modules it contains, and
</li><li><tt>package.bld</tt> - a file that specifies which targets should be used to build the sources contained in this package.
</li></ol>
<p></p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>package.xdc</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">package</span> examples.runtime.errors <span class="br0">&#123;</span> 
    <span class="kw1">module</span> ErrLog; 
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>package.bld</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw1">var</span> i = <span class="nu0">0</span>; i &lt; Build.targets.length; i++<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">var</span> targ = Build.targets<span class="br0">&#91;</span>i<span class="br0">&#93;</span>;
&nbsp;
    <span class="kw1">var</span> lib = Pkg.addLibrary<span class="br0">&#40;</span><span class="st0">&quot;lib/&quot;</span> + Pkg.name, targ<span class="br0">&#41;</span>;
    lib.addObjects<span class="br0">&#40;</span><span class="br0">&#91;</span><span class="st0">&quot;ErrLog.c&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre></td></tr></table>
</td></tr></table>
<p>The <tt>package.xdc</tt> file is largely self explanatory; it defines the name of the package, <tt>examples.runtime.errors</tt>, and it specifies the modules contained in the package, <tt>ErrLog</tt>.  
</p><p>The <tt>package.bld</tt> file, on the other hand, requires some explanation.  This <tt>package.bld</tt> file specifies that the package contains a library in the <tt>lib/</tt> sub-directory containing the compiled version of <tt>ErrLog.c</tt> for every <a href="../Glossary/Glossary.html#Target" title="Glossary">target</a> supported by the producer's build environment.  Remarkably, this <tt>package.bld</tt> file is sufficient to compile <tt>ErrLog.c</tt> for every target, archive it into a library, and create a <a href="../Glossary/Glossary.html#Release" title="Glossary">binary release</a> of this package that supports <i>all</i> targets supported by the producer's build environment.
</p>
<a name="Why_create_a_module.3F"></a><h6> <span class="mw-headline">Why create a module?</span></h6>
<p><span class="Leader">Why create a module?</span>.&nbsp; It's easy enough to define a raise hook function whose body matches the body of <tt>ErrLog_raiseHook()</tt>.  Why bother defining a module and package just to define a three line <tt>Error</tt> "callback" function?
</p>
<ul><li> By virtue of being a module, <tt>ErrLog</tt> has its own logger which allows the integrator to easily redirect errors to a separate "error log";
</li><li> <tt>ErrLog.LOGEVENT</tt> can be configured to give the integrator control over when error logging is enabled as well as the format of all error messages; 
</li><li> rather than cut-copy-pasting subtle error hooks into many applications, it's better to share and enhance a common implementation; and, finally
</li><li>  since we need to define a distinguished <tt>Log</tt> event for errors (<tt>ErrLog.LOGEVENT</tt>) and the only way to define a new <tt>Log</tt> event is to create a module, we really don't have a choice.
</li></ul>
<a name="See_also"></a><h2> <span class="mw-headline">See also</span></h2>
<p></p>
<table id="TOC" class="DocList">

<tr>
<td class="DocListTitle1" style="width:35%;"><a href="Using_xdc.runtime_Errors__Example_1.html" title="Using xdc.runtime Errors/Example 1">Using xdc.runtime Errors/Example 1</a>
</td><td class="DocListSubTitle1">How to use the <tt>Error</tt> module
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="Using_xdc.runtime_Errors__Example_3.html" title="Using xdc.runtime Errors/Example 3">Using xdc.runtime Errors/Example 3</a>
</td><td class="DocListSubTitle">Creating a custom error handler
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="Using_xdc.runtime_Errors__Example_4.html" title="Using xdc.runtime Errors/Example 4">Using xdc.runtime Errors/Example 4</a>
</td><td class="DocListSubTitle">How to create and use custom <tt>Error</tt> IDs
</td></tr>
<tr>
<td class="DocListTitle" style="width:35%;"><a href="../Using_xdc.runtime_Logging/Using_xdc.runtime_Logging__Example_1.html" title="Using xdc.runtime Logging/Example 1">Using xdc.runtime Logging/Example 1</a>
</td><td class="DocListSubTitle">Classic "hello world" using <tt>Log</tt>
</td></tr></table>
<p></p>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Using xdc.runtime Errors/Example 5&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="Using_xdc.runtime_Errors__Example_4.html" title="Example 4"><img src="../common/extensions/rtsc/images/Arrow_left.png" /></a>&nbsp;<a href="Using_xdc.runtime_Errors.html#TOC" title="Using xdc.runtime Errors"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>
<!-- 
Pre-expand include size: 2380 bytes
Post-expand include size: 1443 bytes
Template argument size: 211 bytes
Maximum: 2097152 bytes
-->

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Using_xdc.runtime_Errors.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.267 secs. --></body></html>
