<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Extending xdc.runtime Logging - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Extending xdc.runtime Logging&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Extending xdc.runtime Logging" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Extending_This_Package_Index" title="Overview_of_xdc.runtime#Extending_This_Package_Index"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Extending_xdc.runtime_Logging__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><p id="title">Extending xdc.runtime Logging</p><p id="subtitle">How to create customized Log Event service providers</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Architecture"><span class="tocnumber">2.1</span> <span class="toctext">Architecture</span></a></li>
<li class="toclevel-2"><a href="#Configuration"><span class="tocnumber">2.2</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction"></a><h2> <span class="mw-headline">Introduction</span></h2>
<p>The <tt>xdc.runtime</tt> package contains several modules that work together to provide rich application diagnostic support that can be controlled in real-time within deployed systems.  This diagnostic support is centered around APIs that enable the application to generate or control the generation of <tt><a href="../../cdoc/xdc/runtime/Log.html" class="cdoc"><tt>Log</tt></a></tt> "events".  Every such event is eventually "handled" by a module that implements the <tt><a href="../../cdoc/index.html#xdc/runtime/ILogger.html" class="cdoc"><tt>ILogger</tt></a></tt> interface.  These modules are responsible for recording, displaying, or transmitting the event as appropriate for the application.  
</p><p>Two such modules are provided in the <tt>xdc.runtime</tt> package:
</p>
<ol><li><tt><a href="../../cdoc/xdc/runtime/LoggerBuf.html" class="cdoc"><tt>LoggerBuf</tt></a></tt> - a module that manages a circular memory buffer where events are stored, and
</li><li><tt><a href="../../cdoc/xdc/runtime/LoggerSys.html" class="cdoc"><tt>LoggerSys</tt></a></tt> - a module that interprets each event as it occurs and outputs the result via <tt>System_printf()</tt>.
</li></ol>
<p>In addition, it is possible to create new implementations of the <tt>ILogger</tt> interface that leverage platform or application-specific capabilities.  For example, a logger may transmit the events via existing application communication links, filter events for special handling, or record them to a mass storage device.
</p><p>In the following sections we focus on how to create modules that implement the <tt>ILogger</tt> interface and show how these modules fit into the overall event logging architecture of the <tt>xdc.runtime</tt> package.
</p>
<a name="Overview"></a><h2> <span class="mw-headline">Overview</span></h2>
<p>The <tt>Log</tt> module provides an interface that allows any client code to embed statements that conditionally generate "diagnostic" events.  These events are "handled" by an application-specific or even platform-specific, event "logger".  This architecture allows  code that generates events to be developed and delivered independently of code that handles events.  The handling of events is often application or platform specific: 
</p>
<ul><li>depending on the system hardware platform, events may be handled by the same processor generating the event or events may need to be transmitted to other processors in the system for display; 
</li><li>depending on the application's real-time requirements, events may be displayed as they occur or may need to be deterministically buffered and displayed "in the background" by a separate low priority thread.
</li></ul>
<p>Regardless of how events are handled, the code generating the events need <i>never change or even be re-compiled</i>.
</p>
<a name="Architecture"></a><h3> <span class="mw-headline">Architecture</span></h3>
<p>All event "loggers" are modules that implement the <tt><a href="../../cdoc/xdc/runtime/ILogger.html" class="cdoc"><tt>ILogger</tt></a></tt> interface.
</p><p>Source code that embeds calls to <tt>Log_write()</tt> or <tt>Log_print()</tt> enables integrators to conditionally enable and disable the generation of events at these call sites.  The events generated by these calls include call site information.  In particular, the module ID of the <i>caller</i> of <tt>Log_write()</tt> (or <tt>Log_print()</tt>) is encoded in the event that is passed to the underlying <tt>ILogger</tt>  associated with the module.  This not only enables loggers to conditionally handle events from different parts of the system, it keeps the number of parameters to the embedded <tt>Log_write</tt> (and <tt>Log_print()</tt>) methods to a minimum - making their presence in the code stream less intrusive.
</p>
<ul><li>Both <tt>Log_print()</tt> and <tt>Log_write()</tt> "compose" events that are then passed to an underlying "logger".
</li><li>loggers are responsible for "handling" events; e.g., storing, interpreting, or displaying each event
</li><li>each event encodes both an "event ID" and the module ID of the call site
</li><li>the logger used to handle the event is determined by the module containing the call site; if the call site is not in any module, the logger associated with <tt><a href="../../cdoc/xdc/runtime/Main.html" class="cdoc"><tt>xdc.runtime.Main</tt></a></tt> module is used.
</li></ul>
<p>The figure below illustrates the flow of control that results from a simple <tt>Log_print0()</tt> statement in the application all the way down to an <tt>ILogger</tt> module that "handles" the resulting <tt>Log</tt> event.
</p>
<center><a href="images/RuntimeLog.png" class="image" title="Logger Architecture"><img alt="Logger Architecture" src="images/RuntimeLog.png" width="691" height="243" border="0" /></a></center>
<a name="Configuration"></a><h3> <span class="mw-headline">Configuration</span></h3>
<p>All RTSC modules can be configured with a unique logger.  In addition, any code that is not in a module is implicitly associated with the <tt><a href="../../cdoc/xdc/runtime/Main.html" class="cdoc"><tt>xdc.runtime.Main</tt></a></tt> module.  So, from the point of view of logging, it's possible to consider <i>all</i> code in an application as being part of some module with a potentially unique logger.  
</p><p>Of course, most systems do not create a unique logger for each module but, as we'll see in the examples, the ability to associate a unique logger for selected modules can be extremely useful.  Not only is it possible to strike a different balance between logging overhead with system visibility within different sub-systems of an application, but you can also "chain" loggers to provide sophisticated application-specific event filtering and triggers (see <a href="Extending_xdc.runtime_Logging__Example_1.html" title="Extending xdc.runtime Logging/Example 1">Example 1</a>).  
</p><p>The most common configuration, illustrated in the figure below, is to have a single logger for the entire application.  In this figure, the application consists of the modules <tt>xdc.runtime.Main</tt> and <tt>ModA</tt> through <tt>ModZ</tt>, where <tt>xdc.runtime.Main</tt> represents all  code not in any module and <tt>ModA</tt> is a module that implements the <tt>xdc.runtime.ILogger</tt> interface.
</p>
<center><a href="images/RuntimeLogConfig.png" class="image" title="Logger configuration architecture"><img alt="Logger configuration architecture" src="images/RuntimeLogConfig.png" width="769" height="363" border="0" /></a></center>
<p>The <tt>logger</tt> field shown for each module is simple a pointer to an instance object created by a module that implements the <tt>ILogger</tt> interface.  In addition, each call to a <tt>Log</tt> function implicitly references the <tt>logger</tt> pointer associated with the module in which the <tt>Log</tt> function is called.  By assigning different <tt>logger</tt> pointers to selected modules, the system integrator can "redirect" the output of the <tt>Log</tt> statements for these modules without ever having to recompile these modules.
</p><p>The configuration script that corresponds to this figure is shown below.
<span id="figure_config">
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="kw1">var</span> Defaults = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;xdc.runtime.Defaults&quot;</span><span class="br0">&#41;</span>;
<span class="kw1">var</span> ModA = <span class="re1">xdc.useModule</span><span class="br0">&#40;</span><span class="st0">&quot;...ModA&quot;</span><span class="br0">&#41;</span>;
Defaults.common$.logger = ModA.create<span class="br0">&#40;</span><span class="br0">&#41;</span>; <span class="coMULTI">/* create an anonymous ILogger instance (say inst#0) */</span></pre></td></tr></table>
<p></span>
</p><p>Notice that although we've used to <tt><a href="../../cdoc/xdc/runtime/Defaults.html" class="cdoc"><tt>xdc.runtime.Defaults</tt></a></tt> module to set a default logger for "all" modules (exactly as we did in <a href="../Using_xdc.runtime_Logging/Using_xdc.runtime_Logging__Example_2.html#hello_config" title="Using xdc.runtime Logging/Example 2"><tt>hello.cfg</tt></a> Example 2), the <tt>ModA</tt> module's logger <i>does not</i> point to this logger instance.  Why wasn't the logger for <tt>ModA</tt> also set to the specified default logger?
</p>
<p><div class="Notice"><p class="Notice">The <tt>xdc.runtime</tt> package does <i>not</i> use the <tt>common$.logger</tt> setting of the <tt>Default</tt> module to enable logging on modules that implement the <tt>ILogger</tt> interface.</p></div></p>
<p>Imagine if we enabled "entry" trace on <tt>ModA</tt> and its logger were set to an instance created by <tt>ModA</tt>.  Although it may not be obvious at first, your application would enter an infinite recursion on the first call to any <tt>Log</tt> operation and you'd be in for a long day of debugging.  You might wonder why we would even allow the assignment of a logger instance to an <tt>ILogger</tt> module.  As we'll see in <a href="Extending_xdc.runtime_Logging__Example_1.html" title="Extending xdc.runtime Logging/Example 1">Example 1</a>, the ability to assign an <tt>ILogger</tt> instance to an <tt>ILogger</tt> module allows you to easily create and use powerful application-specific <tt>Log</tt> event filters in your application.
</p>
<a name="Examples"></a><h2> <span class="mw-headline">Examples</span></h2>
<p>The best way to understand how to use and take advantage of loggers is to study some simple examples.  In the table below, we provide examples that illustrate the key requirements of loggers and provide links to more advanced topics.
</p>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tr>
<th align="center"> <b>Example</b>
</th><th align="center"> <b>Description</b>
</th><th align="center"> <b>Purpose</b>
</th></tr>
<tr>
<td align="left"> <a href="Extending_xdc.runtime_Logging__Example_1.html" title="Extending xdc.runtime Logging/Example 1">Example 1</a>
</td><td align="left"> Simple <tt>Log_Event</tt> filter
</td><td align="left"> illustrate the ability to add custom event filtering without changing any existing sources
</td></tr></table>
<a name="See_also"></a><h2> <span class="mw-headline">See also</span></h2>
<p></p>
<table id="TOC" class="DocList">

<tr>
<td class="DocListTitle1" style="width:35%;"><a href="../Using_xdc.runtime_Logging/Using_xdc.runtime_Logging.html" title="Using xdc.runtime Logging">Using xdc.runtime Logging</a>
</td><td class="DocListSubTitle1">How to generate and control Log events
</td></tr></table>
<p></p>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Extending xdc.runtime Logging&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Extending xdc.runtime Logging" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="../Overview_of_xdc.runtime/Overview_of_xdc.runtime.html#Extending_This_Package_Index" title="Overview_of_xdc.runtime#Extending_This_Package_Index"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a>&nbsp;<a href="Extending_xdc.runtime_Logging__Example_1.html" title="Example 1"><img src="../common/extensions/rtsc/images/Arrow_right.png" /></a></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>
<!-- 
Pre-expand include size: 1490 bytes
Post-expand include size: 907 bytes
Template argument size: 178 bytes
Maximum: 2097152 bytes
-->

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Extending_xdc.runtime_Logging.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.205 secs. --></body></html>
