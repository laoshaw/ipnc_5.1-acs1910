<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>Creating Configurable Content - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Creating Configurable Content&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Creating Configurable Content" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"></td></tr></table><p id="title">Creating Configurable Content</p><p id="subtitle">How to leverage the configuration process</p>
<p></p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Configuration_Process"><span class="tocnumber">2</span> <span class="toctext">Configuration Process</span></a>
<ul>
<li class="toclevel-2"><a href="#Package_Functions"><span class="tocnumber">2.1</span> <span class="toctext">Package Functions</span></a></li>
<li class="toclevel-2"><a href="#Module_Functions"><span class="tocnumber">2.2</span> <span class="toctext">Module Functions</span></a></li>
<li class="toclevel-2"><a href="#Order_of_Evaluation"><span class="tocnumber">2.3</span> <span class="toctext">Order of Evaluation</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction"></a><h2> <span class="mw-headline">Introduction</span></h2>
<p>During the configuration process, the RTSC configuration framework invokes specific package functions in response to commands in the user's script and the commands in loaded packages. As a result, it's important to understand which <a href="../Glossary/Glossary.html#Meta-Domain" title="Glossary">meta-domain</a> package and module functions are invoked by the RTSC configuration framework, when these functions are called, and the context that exists when they are called. The sections below provide the details necessary for the content producer to fully leverage the RTSC configuration framework.
</p>
<a name="Configuration_Process"></a><h2> <span class="mw-headline">Configuration Process</span></h2>
<p>The configuration process proceeds in a sequence of "phases":
</p>
<ol><li>object model initialization
</li><li>user's configuration script runs 
</li><li>all loaded packages are closed
</li><li>module state initialization is run for all "used" modules
</li><li>instance state initialization is run for all created instances
</li><li>config model validation is run for all loaded packages
</li><li>C code generation is run for all "used" modules
</li></ol>
<p>In each phase, meta-only <tt class="color-red" style="font-size:110%; font-weight:bold;">XDCscript</tt> code defined by the user or the loaded packages is invoked.  This script code manipulates a "configuration <a href="../Glossary/Glossary.html#DOM" title="Glossary">object model</a>" which is ultimately used to generate a C source file and a linker command file that are integrated into an application's final build.
</p>
<a name="Package_Functions"></a><h3> <span class="mw-headline">Package Functions</span></h3>
<p>The following package functions are called during the configuration process and are optionally defined in the package's <tt>package.xs</tt> file:
</p>
<ul><li><a href="../../cdoc/xdc/IPackage.html#init" class="cdoc"><tt>init()</tt></a> &#151; package initialization occurs when a package is loaded, before a user or any other package can read or write package's configuration parameters
</li><li><a href="../../cdoc/xdc/IPackage.html#close" class="cdoc"><tt>close()</tt></a> &#151; after the user's script is run, each package can act upon the current state of the configuration and make changes in the configuration
</li><li><a href="../../cdoc/xdc/IPackage.html#validate" class="cdoc"><tt>validate()</tt></a> &#151; after all packages and module methods finish modifying the model, the model is "sealed" (made unmodifiable) and then each package can validate the configuration and possibly abort it, but nothing in the model can be changed at this point
</li><li><a href="../../cdoc/xdc/IPackage.html#get.Libs" class="cdoc"><tt>getLibs()</tt></a> &#151; if validation completes without any errors, <tt>getLibs()</tt> is called to get the libraries necessary to use this package
</li><li><a href="../../cdoc/xdc/IPackage.html#get.Sects" class="cdoc"><tt>getSects()</tt></a> &#151; if all of the libraries specified by <tt>getLibs()</tt> exist, <tt>getSects()</tt> is called to get package-specific linker section data which is placed in the generated linker command file along with the list of libraries specified by <tt>getLibs()</tt>
</li></ul>
<p>If you don't define one of these functions, a default implementation will be used instead.  For detailed documentation of these functions see <a href="../../cdoc/xdc/IPackage.html" class="cdoc"><tt>xdc.IPackage</tt></a>.
</p>
<center><a href="images/Config-process.png" class="image" title="image:Config-process.png"><img alt="image:Config-process.png" src="images/Config-process.png" width="659" height="307" border="0" /></a></center>
<a name="Module_Functions"></a><h3> <span class="mw-headline">Module Functions</span></h3>
<p>The following functions are optionally defined in the module's <tt>.xs</tt> file:
</p>
<ul><li><tt><a href="../XDCscript_-_Module-Body.module%24meta%24init/XDCscript_-_Module-Body.module%24meta%24init.html" title="XDCscript - Module-Body.module$meta$init">module$meta$init()</a></tt> &#151; called right before the package's <tt><a href="../../cdoc/xdc/IPackage.html#init" class="cdoc"><tt>init()</tt></a></tt> function, so its purpose is similar, but module specific initialization should be here.
</li><li><tt><a href="../XDCscript_-_Module-Body.module%24use/XDCscript_-_Module-Body.module%24use.html" title="XDCscript - Module-Body.module$use">module$use()</a></tt> &#151; called after user's script, as a consequence of an <tt>xdc.useModule()</tt> call on the module. In most cases, the function <tt>module$use</tt> does not execute immediately within the <tt>xdc.useModule()</tt> call. The execution of <tt>module$use</tt> is delayed until the module's package is closing. However, an exception is made for modules whose packages are already closed at the time <tt>xdc.useModule()</tt> is called on them. In such cases, <tt>module$use</tt> executes immediately and it executes <i>after</i> the module's package <tt>close</tt> function is called. Changes in configuration parameters are allowed in <tt>module$use</tt>.
</li><li><tt><a href="../XDCscript_-_Module-Body.module%24static%24init/XDCscript_-_Module-Body.module%24static%24init.html" title="XDCscript - Module-Body.module$static$init">module$static$init()</a></tt> &#151; target object for the module is initialized; no changes in configuration parameters are allowed here and is only called for target modules.
</li><li><tt><a href="../XDCscript_-_Module-Body.module%24validate/XDCscript_-_Module-Body.module%24validate.html" title="XDCscript - Module-Body.module$validate">module$validate()</a></tt> &#151; called for all modules in a package, before the package's <tt><a href="../../cdoc/xdc/IPackage.html#validate" class="cdoc"><tt>validate()</tt></a></tt> function; can be used to verify the consistency of values assigned to configuration parameters, but no changes in parameters are allowed.
</li><li><tt><a href="../XDCscript_-_Instance-Body.instance%24meta%24init/XDCscript_-_Instance-Body.instance%24meta%24init.html" title="XDCscript - Instance-Body.instance$meta$init">instance$meta$init()</a></tt> &#151; invoked whenever <tt><a href="../XDCscript_-_Module-Object.create/XDCscript_-_Module-Object.create.html" title="XDCscript - Module-Object.create">create()</a></tt> is called, configuration can be changed.
</li><li><tt><a href="../XDCscript_-_Instance-Body.instance%24static%24init/XDCscript_-_Instance-Body.instance%24static%24init.html" title="XDCscript - Instance-Body.instance$static$init">instance$static$init()</a></tt> &#151; invoked after closing to initialize instance object, no changes in configuration parameters are allowed; called only for instances of target modules.
</li></ul>
<p>For detailed documentation of these functions see the <a href="../XDCscript_Language_Reference/XDCscript_Language_Reference.html" title="XDCscript Language Reference">XDCscript Language Reference</a>.
</p>
<a name="Order_of_Evaluation"></a><h3> <span class="mw-headline">Order of Evaluation</span></h3>
<p>The table below summarizes the order of evaluation of the methods optionally supplied by a package.  Within a package, these methods are guaranteed to be evaluated in top to bottom order.  When two methods appear in the same row, no order is guaranteed.
</p>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tr>
<th align="right"> <b>Id</b>
</th><th align="center"> <b>Phase</b>
</th><th align="center"> <b>Package</b>
</th><th align="center"> <b>Module</b>
</th><th align="center"> <b>Instance</b>
</th></tr>
<tr>
<td align="left" rowspan="3"> 2
</td><td align="left" rowspan="3"> user's script
</td><td align="left">
</td><td align="left"> <tt>module$meta$init</tt> [2-3]
</td><td align="left">
</td></tr>
<tr>
<td align="left"> <tt>init</tt> [2-3]
</td><td align="left">
</td><td align="left">
</td></tr>
<tr>
<td align="left">
</td><td align="left">
</td><td align="left"> <tt>instance$meta$init</tt> [2-5]
</td></tr>
<tr>
<td align="left"> 3
</td><td align="left"> package close
</td><td align="left"> <tt>close</tt> [3]
</td><td align="left"> <tt>module$use</tt> [3]
</td><td align="left"> <tt>instance$meta$init</tt> [2-5]
</td></tr>
<tr>
<td align="left"> 4
</td><td align="left"> module init
</td><td align="left">
</td><td align="left"> <tt>module$static$init</tt> [4]
</td><td align="left"> <tt>instance$meta$init</tt> [2-5]
</td></tr>
<tr>
<td align="left"> 5
</td><td align="left"> instance init
</td><td align="left">
</td><td align="left">
</td><td align="left"> <tt>instance$static$init</tt> [5]
</td></tr>
<tr>
<td align="left" rowspan="2"> 6
</td><td align="left" rowspan="2"> validation
</td><td align="left">
</td><td align="left"> <tt>module$validate</tt> [6]
</td><td align="left">
</td></tr>
<tr>
<td align="left"> <tt>validate</tt> [6]
</td><td align="left">
</td><td align="left">
</td></tr>
<tr>
<td align="left"> 7
</td><td align="left"> generation
</td><td align="left">
</td><td align="left"> <i>module templates</i> [7]
</td><td align="left">
</td></tr></table>
<p><br />
Order of evaluation between packages is also indicated by this table.  Each method name is followed by the id(s) of the phases in which it can be run.  A method whose largest phase id is less than the minimum phase id of another method is guaranteed to run first.  For example, all package <tt>validate()</tt> methods run after all <tt>instance$meta$init()</tt> calls.
</p><p>Ordering of phases also determines which xdc methods can and cannot be called within a particular phase. Any calls that would require going backwards to an already completed phase are not allowed. For example, <tt>module$static$init</tt> functions invoked in the phase 4 cannot call <tt><a href="../XDCscript_-_xdc.loadPackage/XDCscript_-_xdc.loadPackage.html" title="XDCscript - xdc.loadPackage">xdc.loadPackage()</a></tt> on any new packages because the package's <tt>init()</tt> function, which can be called only in phases 2 and 3, would have to be called for those packages. Here is a summary of such limitations:
</p>
<ul><li>After the phase 3, all configuration parameters are sealed and cannot be changed
</li><li><tt>xdc.loadPackage()</tt> and <tt><a href="../XDCscript_-_xdc.useModule/XDCscript_-_xdc.useModule.html" title="XDCscript - xdc.useModule">xdc.useModule()</a></tt> can be called only in the first 3 phases
</li><li><tt><a href="../XDCscript_-_xdc.module/XDCscript_-_xdc.module.html" title="XDCscript - xdc.module">xdc.module()</a></tt> can always be called for modules in previously loaded packages, but only in the first 3 phases for modules from packages not being already loaded
</li><li><tt>Mod.create()</tt> can be called only in the first 5 phases 
</li></ul>
<table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=Creating Configurable Content&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;[<a href="/mediawiki-tip/index.php?title=Special:Offline/Creating Configurable Content" title="a standalone HTML bundle of this entire document, ready for download">offline version</a>]</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"></td></tr></table><div id=copyInfo>Copyright &#169; 2008 The Eclipse Foundation. All Rights Reserved</div>
<!-- 
Pre-expand include size: 1952 bytes
Post-expand include size: 968 bytes
Template argument size: 94 bytes
Maximum: 2097152 bytes
-->

			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__Creating_Configurable_Content.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.216 secs. --></body></html>
