<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="mediawiki-tip/opensearch_desc.php" title="RTSC-Pedia (English)" />
		<title>ROV Module Writers Guide/Fundamentals - Offline Version</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../common/skins/common/shared.css";
			@import "../common/skins/monobook/main.css";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../common/skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../common/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../common/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../common/skins/monobook/IE70Fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../common/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "../common/skins";
var wgArticlePath = "/docs-tip/$1";
var wgScriptPath = "mediawiki-tip";
var wgScript = "mediawiki-tip/index.php";
var wgServer = "http://rtsc.eclipse.org";
var wgCanonicalNamespace = "Special";
var wgCanonicalSpecialPageName = "Offline";
var wgNamespaceNumber = -1;
var wgPageName = "Special:Offline";
var wgTitle = "Offline";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = 0;
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = 0;
/*]]>*/</script>
                
		<script type="text/javascript" src="../common/skins/common/wikibits.js?97"><!-- wikibits js --></script>
		<script type="text/javascript" src="mediawiki-tip/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "mediawiki-tip/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "mediawiki-tip/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
<link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/ViewStyle.css" /><link rel="stylesheet" type="text/css" href="../common/extensions/rtsc/MainStyle.css" />
	</head>
<body  class="mediawiki ns--1 ltr page-Special_Offline">
	<div id="globalWrapper" align="center">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"></h1>
		<div id="bodyContent">
			<h3 id="siteSub">From RTSC-Pedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content --><div id="revInfo">revision tip</div><span id="printInfo">&#151;&#151;&nbsp;LANDSCAPE orientation</span><table width="100%"><tr><td class="lights"><img src="../common/extensions/rtsc/images/yellow_light.png" /></td><td class="offline">[<a href="/mediawiki-tip/index.php?title=ROV Module Writers Guide/Fundamentals&amp;printable=yes" title="just this page in black-and-white, ready for printing in landscape orientation">printable version</a>]&nbsp;&nbsp;</td><td class="offlineDate">offline version generated on 02-Oct-2009 22:10 UTC</td><td class="arrows"><a href="ROV_Module_Writers_Guide.html#TOC" title="ROV Module Writers Guide"><img src="../common/extensions/rtsc/images/Arrow_up.png" /></a></td></tr></table><p id="title">ROV Module Writers Guide/Fundamentals</p><p id="subtitle">The basics of creating an ROV view</p>
<p><br />
</p>
<a name="ROV_Fundamentals"></a><h2> <span class="mw-headline"> ROV Fundamentals </span></h2>
<p>Each module that contributes to ROV defines an instance and / or a module "view structure" which defines the data to be displayed in ROV. Each module also defines a set of "view initialization" functions which process the module and instance state data from the target to populate these view structures.
</p><p>ROV manages the complexity of retrieving and decoding data from the target, so the module writer's responsibility is merely to shape and organize the data to make it suitable to display.
</p><p>Since ROV can be used to debug a broken system, another role of ROV is to validate the target data, identifying any errors with it and conveying those errors to the ROV user. This validation is done as part of the view initialization functions.
</p><p>There are essentially three steps to creating an ROV view for a module:
</p>
<ol><li> Define a view structure in <tt>Mod.xdc</tt> which indicates the fields that will be displayed.
</li><li> Define the name of the view tab in <tt>Mod.xdc</tt>, specifying what view structure to use and what view initialization function to call. 
</li><li> Write the view initialization function in <tt>Mod.xs</tt>.
</li></ol>
<a name="Defining_The_Views"></a><h2> <span class="mw-headline"> Defining The Views </span></h2>
<p>The view structures, which define what to display in ROV, are defined in the module specification file (e.g., <tt>Mod.xdc</tt>) for each module. The field names of these structures will be the column headers in the GUI. The column headers will also be in the same order as the fields in the structure.
</p>
<span id="figure"><center><a href="images/The_ROV_GUI_2.PNG" class="image" title="Image:The_ROV_GUI_2.PNG"><img alt="Image:The_ROV_GUI_2.PNG" src="images/The_ROV_GUI_2.PNG" width="645" height="280" border="0" /></a></center></span>
<p>The view structures may have any name. By convention, they are named after their view tab. For example, "BasicView", "DetailedView", and "ModuleView".
</p><p>Below are some example view structures.
</p>
<table>

<tr valign="top">
<td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>BasicView example</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">metaonly</span> <span class="kw1">struct</span> BasicView <span class="br0">&#123;</span>
    <span class="kw2">String</span>  label;
    <span class="kw2">Int</span>     priority;
    <span class="kw2">String</span>  mode;
    SizeT   stackSize;
    Ptr     stack; 
    <span class="kw2">String</span>  fxn<span class="br0">&#91;</span><span class="br0">&#93;</span>;
    UArg    arg0; 
    UArg    arg1; 
    SizeT   stackPeak;
<span class="br0">&#125;</span></pre></td></tr></table>
</td><td><table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>ModuleView example</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">metaonly</span> <span class="kw1">struct</span> ModuleView <span class="br0">&#123;</span>
    <span class="kw2">Bool</span>    schedulerLocked;
    <span class="kw2">Bits32</span>  readyQStatesMask;
    <span class="kw2">Bool</span>    workPending;
    <span class="kw2">UInt</span>    numVitalTasks;
    Ptr     currentTask;
<span class="br0">&#125;</span></pre></td></tr></table>
</td></tr></table>
<p>Because the ROV GUI displays data in tables, the fields of these structures must be primitive types (integers, strings, pointers, booleans). They cannot be structures, because the GUI cannot display hierarchical data in table form. Arrays of primitive types <i>are</i> allowed, however. Arrays are displayed in the GUI as drop down menus.
</p><p>All views automatically have an "address" field, which will appear as the first field in the display, so "address" should not be included as a field in these view structures.
</p><p>When you use the ROV GUI and click on a module on the left hand side, you'll notice that a number of tabs appear on the right hand side, such as "Basic", "Detailed", "Module", and "Raw".
</p><p>These tabs help to organize the data and separate the instance views, module views, and raw data. They also provide a way of managing the performance of ROV. Data can be divided across the tabs based on how long it takes to retrieve and process, so that some tabs may be accessed quicker than others.
</p><p>ROV communicates with the target through CCS and reading and decoding memory from the target can be slow. For a module that needs to read a large amount of data from the target, you might create two separate instance views. The "Basic" tab could just read the state structures and provide basic information, while a "Detailed" tab could read more data and present more information. This way, if a user is only interested in the "Basic" data, then this data will be returned to them quickly -- the user only has to pay the penalty of the large memory reads if they are interested in the extra data. 
</p><p>The "Raw" tab is provided automatically by ROV, and will appear automatically for any module, even those that do not specify anything to display in ROV. All other tabs are specified in the module specification file by configuring the module's ROV facet configuration parameter. 
</p>
<p></p>
<table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>ROV facet example</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcspec"><span class="kw1">import</span> xdc.rov.ViewInfo
&nbsp;
...
&nbsp;
<span class="re1">@Facet</span>
<span class="kw1">metaonly</span> <span class="kw1">config</span> ViewInfo.Instance rovViewInfo = 
    ViewInfo.<span class="kw2">create</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        viewMap: <span class="br0">&#91;</span>
            <span class="br0">&#91;</span><span class="st0">'Basic'</span>,    <span class="br0">&#123;</span>type: ViewInfo.INSTANCE, viewInitFxn: <span class="st0">'viewInitBasic'</span>,    structName: <span class="st0">'BasicView'</span><span class="br0">&#125;</span><span class="br0">&#93;</span>,
            <span class="br0">&#91;</span><span class="st0">'Detailed'</span>, <span class="br0">&#123;</span>type: ViewInfo.INSTANCE, viewInitFxn: <span class="st0">'viewInitDetailed'</span>, structName: <span class="st0">'DetailedView'</span><span class="br0">&#125;</span><span class="br0">&#93;</span>,
            <span class="br0">&#91;</span><span class="st0">'Module'</span>,   <span class="br0">&#123;</span>type: ViewInfo.MODULE,   viewInitFxn: <span class="st0">'viewInitModule'</span>,   structName: <span class="st0">'ModuleView'</span><span class="br0">&#125;</span><span class="br0">&#93;</span>,
        <span class="br0">&#93;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre></td></tr></table>
<p>The ROV facet is an instance of the module <tt><a href="../../cdoc/xdc/rov/ViewInfo.html" class="cdoc"><tt>xdc.rov.ViewInfo</tt></a></tt> . The instance's <tt><a href="../../cdoc/index.html#xdc/rov/ViewInfo.html#view.Map" class="cdoc"><tt>viewMap</tt></a></tt> property defines the views that are displayed in ROV for this module.
</p><p>The tabs will appear in the order they are specified in the ROV facet. The "Raw" tab should not be on this list; ROV adds it automatically and it will always be the last tab displayed.
</p><p>Each tab in the facet defines three properties:
</p>
<ul><li> <b>type</b> -- The type of the view (instance, module, etc.), defined by xdc.rov.ViewInfo.ViewType.
</li><li> <b>viewInitFxn</b> -- Specifies the XDC script function to run in order to populate the view structure for this tab.
</li><li> <b>structName</b> -- The name of the view structure to use for this tab. 
</li></ul>
<p>Tabs may have any name you choose, and can include spaces and special characters. For consistency with other modules, however, it is recommended to begin with the terms "Basic", "Detailed", and "Module".
</p>
<a name="View_Function_Basics"></a><h2> <span class="mw-headline"> View Function Basics </span></h2>
<p>The view initialization functions belong in your module's XS script (e.g., Mod.xs). They may have any name you choose, since the name is specified in the 'viewFxn' field in the module's ROV facet.
</p><p>The view function parameters depend on the view type. For an instance view, the function takes two parameters, 'view' and 'obj'. The first parameter is an instance of the view structure to be populated for display. The second parameter is an instance state object from the target which contains the target data.
</p><p>Initializing most of the fields is often as easy as copying a value from the target state structure to the view structure.
</p>
<table cellpadding="0" cellspacing="0" class="codex"><tr><td class="codexLab"></td><td class="codexName"><tt>view init function example</tt></td></tr><tr class="codex"><td class="codexLab"><tt class="codexLab">&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br /></tt></td><td class="codexBody"><pre class="xdcscript"><span class="coMULTI">/*
 * ======== viewInitBasic ========
 * Initialize the 'Basic' instance view.
 */</span>
<span class="kw1">function</span> viewInitBasic<span class="br0">&#40;</span>view, obj<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    view.priority = obj.priority; 
    view.stackSize = obj.stackSize;
    ...
<span class="br0">&#125;</span></pre></td></tr></table>
<p>The obj parameter only contains simple scalar data. ROV does not follow any pointers automatically--any pointers in the target structure will appear as addresses, not the data they point to. Retrieving data from pointers is covered later.
</p><p><br />
</p>
			<div class="printfooter">
Retrieved from "<a href="http://rtsc.eclipse.org/docs-tip/Special:Offline">http://rtsc.eclipse.org/docs-tip/Special:Offline</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-special" class="selected"><a href="../Special:Offline/Special:Offline__ROV_Module_Writers_Guide.html" title="This is a special page, you can't edit the page itself">Special</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="mediawiki-tip/index.php?title=Special:Userlogin&amp;returnto=Special:Offline" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../common/extensions/rtsc/images/logo.png);" href="/docs-tip/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-RTSC-pedia-home"><a href="../Main_Page/Main_Page.html">RTSC-pedia home</a></li>
				<li id="n-RTSC-project-home"><a href="http://rtsc.eclipse.org ">RTSC project home</a></li>
				<li id="n-News-.26-support"><a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.dsdp.rtsc">News &amp; support</a></li>
				<li id="n-Help"><a href="../Help:Contents/Help:Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-binders'>
		<h5>binders</h5>
		<div class='pBody'>
			<ul>
				<li id="n-General-Information"><a href="../General_Information/General_Information.html">General Information</a></li>
				<li id="n-RTSC-Programming"><a href="../RTSC_Programming/RTSC_Programming.html">RTSC Programming</a></li>
				<li id="n-User.27s-Guide"><a href="../XDCtools_User%27s_Guide/XDCtools_User%27s_Guide.html">User's Guide</a></li>
				<li id="n-Reference-Manual"><a href="../XDCtools_Reference_Manual/XDCtools_Reference_Manual.html">Reference Manual</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-package_reference'>
		<h5>package reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XDCtools-packages"><a href="http://rtsc.eclipse.org/cdoc-tip/index.html ">XDCtools packages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-lists'>
		<h5>lists</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Master-doc-map"><a href="../Special:DocMap/Special:DocMap__Main_Page.html">Master doc-map</a></li>
				<li id="n-Category-query"><a href="../Special:Cats/Special:Cats.html">Category query</a></li>
				<li id="n-Redirected-pages"><a href="../Special:Listredirects/Special:Listredirects.html">Redirected pages</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Find.2BReplace-.28grep.29"><a href="../Special:Grep/Special:Grep.html">Find+Replace (grep)</a></li>
				<li id="n-RSS-feed"><a href="http://rtsc.eclipse.orgmediawiki-tip/index.php?title=Special:Recentchanges&amp;feed=rss ">RSS feed</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/docs-tip/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search RTSC-Pedia [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>more tools</h5>
		<div class="pBody">
			<ul>
<li id="t-upload"><a href="../Special:Upload/Special:Upload.html" title="Upload images or media files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="../Special:Specialpages/Special:Specialpages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../common/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="privacy"><a href="../RTSC-Pedia:Privacy_policy/RTSC-Pedia:Privacy_policy.html" title="RTSC-Pedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../RTSC-Pedia:About/RTSC-Pedia:About.html" title="RTSC-Pedia:About">About RTSC-Pedia</a></li>
				<li id="disclaimer"><a href="../RTSC-Pedia:General_disclaimer/RTSC-Pedia:General_disclaimer.html" title="RTSC-Pedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.211 secs. --></body></html>
